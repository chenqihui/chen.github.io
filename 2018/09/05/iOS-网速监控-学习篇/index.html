<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>iOS 网速监控 学习篇 | RyuukuSpace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;网络测速会在 App 性能里面经常提到。网络的好与坏影响了 App 的使用体验。因此监听网络状态，根据网络的状态来控制 App 的功能 或者 对应处理，能达到提升用户体验的目的，它也就成了 App 优化项的关键之一。当然性能还包括 App 体积，App 的热启动 &amp; 冷启动 等等指标。 &amp;nbsp;&amp;nbs">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS 网速监控 学习篇">
<meta property="og:url" content="http://chenqihui.github.io/2018/09/05/iOS-%E7%BD%91%E9%80%9F%E7%9B%91%E6%8E%A7-%E5%AD%A6%E4%B9%A0%E7%AF%87/index.html">
<meta property="og:site_name" content="RyuukuSpace">
<meta property="og:description" content="&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;网络测速会在 App 性能里面经常提到。网络的好与坏影响了 App 的使用体验。因此监听网络状态，根据网络的状态来控制 App 的功能 或者 对应处理，能达到提升用户体验的目的，它也就成了 App 优化项的关键之一。当然性能还包括 App 体积，App 的热启动 &amp; 冷启动 等等指标。 &amp;nbsp;&amp;nbs">
<meta property="og:locale">
<meta property="article:published_time" content="2018-09-05T07:45:02.000Z">
<meta property="article:modified_time" content="2020-08-02T18:16:51.473Z">
<meta property="article:author" content="AnakinChen">
<meta property="article:tag" content="HTTP">
<meta property="article:tag" content="网速">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="RyuukuSpace" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">RyuukuSpace</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://chenqihui.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-iOS-网速监控-学习篇" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/05/iOS-%E7%BD%91%E9%80%9F%E7%9B%91%E6%8E%A7-%E5%AD%A6%E4%B9%A0%E7%AF%87/" class="article-date">
  <time datetime="2018-09-05T07:45:02.000Z" itemprop="datePublished">2018-09-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS 网速监控 学习篇
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;网络测速会在 App 性能里面经常提到。网络的好与坏影响了 App 的使用体验。因此监听网络状态，根据网络的状态来控制 App 的功能 或者 对应处理，能达到提升用户体验的目的，它也就成了 App 优化项的关键之一。当然性能还包括 App 体积，App 的热启动 &amp; 冷启动 等等指标。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先说下测速的需求，要在不增加额外的上传 &amp; 下载的资源消耗，就能达到实时测速的目的。也就是得通过计算 App 现有业务的网络请求，获取的传输数据大小 &amp; 请求时间，从而得出网速。</p>
<a id="more"></a>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关于网络测速，在进行准备到测试开发的时候（5月末），居然同时间发现已经有<a href="#jump">现成的文章</a> ，那就不重复写（还不是因为懒），内容原理差不多，甚至更详细。那就补充下准备的内容，后面的内容会有点偏离主题，不过都是为了网络请求准备了解的知识点：</p>
<h4 id="前文"><a href="#前文" class="headerlink" title="前文"></a>前文</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;网速关键就是：获取的传输数据大小 &amp; 请求时间。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过 Charles 抓包工具，可以看到它有各种数值分析。其中就有 Size &amp; Duration ，然后计算出 Speed。除了总的 Speed，它还区分了 Request Speed 和 Response Speed，也就是 Request &amp; Response 有各自的 Data 和 Duration。</p>
<h5 id="Size"><a href="#Size" class="headerlink" title="Size"></a>Size</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它有 TLS Handshake、Header、Cookies、Body、Uncompressed Body、Compression。从这里，留意到我们要计算的数据，即 Body，在传输的时候是进过压缩，所以真正传输的 data 大小并不是接口访问后得到的数据包大小，不同的 encode 《<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Compression">HTTP 协议中的数据压缩</a>》，其压缩率都不同，从抓包的数据看出 gzip 大概的压缩率在70%到80%。还有其实传输的 data，虽然 Body 为主要占比，可是如果留意到 TLS Handshake，这是在 Duration 和 Size 都出现的。 </p>
<h5 id="Duration"><a href="#Duration" class="headerlink" title="Duration"></a>Duration</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它包含了 DNS、Connect、TLS Handshake、Request、Response、Latency 的总和。 </p>
<h5 id="TLS-Handshake，"><a href="#TLS-Handshake，" class="headerlink" title="TLS Handshake，"></a>TLS Handshake，</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它其实就是使用的 HTTP 加入了验证 TLS / SSL 而形成 HTTPS。《<a target="_blank" rel="noopener" href="http://www.mahaixiang.cn/internet/1233.html">HTTP 与 HTTPS 的区别</a>》摘要：</p>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息，HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此，HTTP协议不适合传输一些敏感信息，比如：信用卡号、密码等支付信息。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS，为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。</p>
<p>一、HTTP和HTTPS的基本概念</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP：是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从WWW服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTPS：是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它也需要时间和数据交换，并且它不是每次都需要消耗，而是在频繁访问同个接口时候，它仍然处于链接的时候，是会简化数据，所以抓包发现它的时长有时长，有时短，数据包大小也是。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用《<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7158568e4867">SSL/TLS 握手过程详解</a>》进行握手之后，成功完成 HTTPS 的安全加密认证，后续的消息都将使用过程生成的秘钥进行加密，从而对 HTTP 的明文传输改为 HTTPS 的密文传输。接着就是 TCP 的握手《<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/24853633">TCP 为什么是三次握手，而不是两次或四次？</a>》 &amp; 《<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_18425655/article/details/52163228">面试题：三次握手、四次握手内容整理</a>》 &amp; 《<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/5111559?fr=aladdin">三次握手</a>》。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;加密：《<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ffe8c203a471">互联网安全之数字签名、数字证书与PKI系统</a>》</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a><span id="jump">总结</span></h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;了解到这里，Duration 可以是个估计值，有点误差。而 iOS 通过网络得到的 Size 是还原了数据包的二进制大小，而非传输的数据大小，由于 HTTPS 的签名压缩率的不同，所以计算 Size 的误差就更大了，当时写到这里就停了下，直到发现 **小鱼周凌宇 的 <a target="_blank" rel="noopener" href="http://zhoulingyu.com/2018/05/30/ios-network-traffic/#more">iOS 流量监控分析</a>**，后续她还推荐了 <a target="_blank" rel="noopener" href="https://github.com/zhshijie/ImageSaveWarehouse/blob/master/iOS%20%E6%96%87%E6%A1%A3/iOS%20%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7/iOS%20%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7.md">ImageSaveWarehouse/iOS 网络流量监控</a> 。通过她的方式模拟传输的数据包大小，从而更精准地得出 Duration &amp; Size 的获取，计算 iOS 网速，并进行实时监控。当时这种模拟 zip &amp; signature 是消耗 CPU，如果真的需要，可以针对部分接口来计算。避免太大的开销。</p>
<h4 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h4><h5 id="NSURLConnection"><a href="#NSURLConnection" class="headerlink" title="NSURLConnection"></a>NSURLConnection</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它是 iOS9 之前，最常使用的网络接口</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)getCurrentNetIP &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line">        <span class="built_in">NSString</span> *rcUrl = <span class="string">@&quot;https://www.xxxx.com&quot;</span>;</span><br><span class="line">        <span class="built_in">NSMutableURLRequest</span> *request = [[<span class="built_in">NSMutableURLRequest</span> alloc] initWithURL:[<span class="built_in">NSURL</span> URLWithString:rcUrl] cachePolicy:<span class="built_in">NSURLRequestReloadIgnoringLocalCacheData</span> timeoutInterval:<span class="number">8</span>];</span><br><span class="line">        [request setHTTPMethod:<span class="string">@&quot;GET&quot;</span>];</span><br><span class="line">        <span class="built_in">NSHTTPURLResponse</span>* url_response = <span class="literal">nil</span>;</span><br><span class="line">        <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</span><br><span class="line">        <span class="built_in">NSData</span> *received = [<span class="built_in">NSURLConnection</span> sendSynchronousRequest:request returningResponse:&amp;url_response error:&amp;error];</span><br><span class="line">        <span class="keyword">if</span> (received != <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="built_in">NSString</span> *aString = [[<span class="built_in">NSString</span> alloc] initWithData:received encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="NSURLSession-amp-NSURLSessionDataTask"><a href="#NSURLSession-amp-NSURLSessionDataTask" class="headerlink" title="NSURLSession &amp; NSURLSessionDataTask"></a>NSURLSession &amp; NSURLSessionDataTask</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它是 iOS9 之后苹果推行的，并且 AFNetwork 3.0 版本也更新使用。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:urlString];</span><br><span class="line"><span class="built_in">NSURLSession</span> *session = [<span class="built_in">NSURLSession</span> sharedSession];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSURLSessionDataTask</span> *dataTask = [session dataTaskWithURL:url completionHandler:^(<span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error == <span class="literal">nil</span> &amp;&amp; data.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">NSDictionary</span> *dict = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:data options:<span class="built_in">NSJSONReadingAllowFragments</span> error:<span class="literal">nil</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *errorString = <span class="string">@&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br><span class="line">[dataTask resume];</span><br></pre></td></tr></table></figure>

<p>参考：  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/056b1817d25a">NSURLSession 与 NSURLConnection区别</a></li>
</ul>
<h5 id="NSOperation-amp-NSOperationQueue"><a href="#NSOperation-amp-NSOperationQueue" class="headerlink" title="NSOperation &amp; NSOperationQueue"></a>NSOperation &amp; NSOperationQueue</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上述两个都有下载 &amp; 上传文件的接口，而 Operation 也可以针对文件进行下载。这一部分其实早期写开发下载模块的时候有使用过。</p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4443d668e931">NSOperation和NSOperationQueue相关</a>  </li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/52fe1b85c404">iOS多线程之NSOperationQueue</a>  </li>
</ul>
<h5 id="GCDWebServer"><a href="#GCDWebServer" class="headerlink" title="GCDWebServer"></a>GCDWebServer</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本地服务，可用于 task 一边下载视频文件，然后开启本地服务，为播放器提供本地的视频流，从而达到一边下载一边播放的功能。[TODO]</p>
<p>参考： </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/534632485234">GCDWebServer</a></li>
</ul>
<h4 id="NSURLProtocol"><a href="#NSURLProtocol" class="headerlink" title="NSURLProtocol"></a>NSURLProtocol</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以上是 iOS 的网络请求提供的高级接口和对象。它们能满足我们客户端在请求获取数据。如前文说说，真正的 Speed 其实按开头的想法计算是不准确的，有很大的误差，但是换个角度，如果 App 内部使用同一套规则计算，其实它的网速快慢就是相对的，所以它对于 Charles 的数据的“误差”也就可以忽略。只要我们按获取的数据包大小比请求到消耗的时间来定义快慢标准就可以了。因此，继续这个话题引用 NSURLProtocol 《<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/03ddcfe5ebd7">iOS H5容器的一些探究（二）：iOS下的黑魔法NSURLProtocol</a>》，使用它其实等同于在每个请求的接口 task 的回调来计算是一样的，它的优点是覆盖了所有的基于系统的 NSURLConnection 或者 NSURLSession 进行封装的网络请求，包括 UIWebView 。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>) connectionDidFinishLoading:(<span class="built_in">NSURLConnection</span> *)connection &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> endTime = <span class="built_in">CFAbsoluteTimeGetCurrent</span>();</span><br><span class="line">    <span class="built_in">CGFloat</span> useTime = endTime - <span class="keyword">self</span>.startTime;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;chen--useTime--%f&quot;</span>, useTime);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">CGFloat</span> sizeB = connection.currentRequest.HTTPBody.length + <span class="keyword">self</span>.totalSize;</span><br><span class="line">    <span class="built_in">CGFloat</span> kb = sizeB/<span class="number">1024.</span>f;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;chen--data--%f&quot;</span>, kb);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;chen--speed--%f&quot;</span>, kb/useTime);</span><br><span class="line"></span><br><span class="line">    [<span class="keyword">self</span>.client URLProtocolDidFinishLoading:<span class="keyword">self</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="其他网络测试"><a href="#其他网络测试" class="headerlink" title="其他网络测试"></a>其他网络测试</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;说起网络测试，肯定看过 Reachability 和 SimplePing，这两个都是苹果开源的工具。Github 上有多个扩展版本。</p>
<h5 id="Reachability"><a href="#Reachability" class="headerlink" title="Reachability"></a>Reachability</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="_blank" rel="noopener" href="https://developer.apple.com/library/content/samplecode/Reachability/Introduction/Intro.html">Reachability</a> 就不在细说，它可以检查当前网络 和 实时监控网络的切换情况，自己的项目也是针对它再次修改，细化到判断当前网络的类型，如 4G、3G 等。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启</span></span><br><span class="line">- (<span class="keyword">void</span>)p_startNetReachable:(<span class="built_in">BOOL</span>)bEable &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="keyword">if</span> (bEable == <span class="literal">YES</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.reachability = [QHReachability reachabilityForInternetConnection];</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">self</span>.currentStatus != [<span class="keyword">self</span>.reachability currentReachabilityStatus]) &#123;</span><br><span class="line">                <span class="keyword">self</span>.currentStatus = [<span class="keyword">self</span>.reachability currentReachabilityStatus];</span><br><span class="line">                [<span class="keyword">self</span> p_netReachable:<span class="keyword">self</span>.currentStatus];</span><br><span class="line">            &#125;</span><br><span class="line">            [<span class="keyword">self</span>.reachability startNotifier];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">self</span>.reachability != <span class="literal">nil</span>) &#123;</span><br><span class="line">                [<span class="keyword">self</span>.reachability stopNotifier];</span><br><span class="line">                <span class="keyword">self</span>.reachability = <span class="literal">nil</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 监听</span></span><br><span class="line"><span class="comment">// 添加</span></span><br><span class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(qhReachabilityChangedAction:) name:kQHReachabilityChangedNotification object:<span class="literal">nil</span>];</span><br><span class="line"><span class="comment">// 移除</span></span><br><span class="line">[[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span> name:kQHReachabilityChangedNotification object:<span class="literal">nil</span>];</span><br><span class="line"><span class="comment">// Action</span></span><br><span class="line">- (<span class="keyword">void</span>)qhReachabilityChangedAction:(<span class="built_in">NSNotification</span> *)notif &#123;</span><br><span class="line">    QHReachability *curReach = [notif object];</span><br><span class="line">    NetworkStatus status = [curReach currentReachabilityStatus];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.currentStatus == status)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">self</span>.currentStatus = status;</span><br><span class="line">    [<span class="keyword">self</span> p_netReachable:<span class="keyword">self</span>.currentStatus];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="SCNetworkReachability"><a href="#SCNetworkReachability" class="headerlink" title="SCNetworkReachability"></a>SCNetworkReachability</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;文章讲解了内部都是使用 <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/systemconfiguration/scnetworkreachability?language=objc">SCNetworkReachability</a>《<a target="_blank" rel="noopener" href="https://blog.csdn.net/yyyyccll/article/details/68942015">用SCNetworkReachability判断联网状态</a>》 来实现的。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;也可以使用《<a target="_blank" rel="noopener" href="https://www.cnblogs.com/sunfuyou/p/6838609.html">iOS Reachability检测网络状态</a>》中介绍了 AFNetworkReachabilityManager。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&quot;NetworkUtil.h&quot;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;SystemConfiguration/SCNetworkReachability.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NetworkUtil</span></span></span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">BOOL</span>)isNetworkReachable &#123;</span><br><span class="line">    <span class="comment">// Create zero addy</span></span><br><span class="line">    <span class="comment">//创建零地址，0.0.0.0的地址表示查询本机的网络连接状态</span></span><br><span class="line">    <span class="keyword">struct</span> sockaddr_in zeroAddress;</span><br><span class="line">    bzero(&amp;zeroAddress, <span class="keyword">sizeof</span>(zeroAddress));</span><br><span class="line">    zeroAddress.sin_len = <span class="keyword">sizeof</span>(zeroAddress);</span><br><span class="line">    zeroAddress.sin_family = AF_INET;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Recover reachability flags</span></span><br><span class="line">    <span class="comment">// SCNetworkReachabilityFlags：保存返回的测试连接状态</span></span><br><span class="line">    <span class="comment">// 其中常用的状态有：</span></span><br><span class="line">    <span class="comment">// kSCNetworkReachabilityFlagsReachable：能够连接网络</span></span><br><span class="line">    <span class="comment">// kSCNetworkReachabilityFlagsConnectionRequired：能够连接网络，但是首先得建立连接过程</span></span><br><span class="line">    <span class="comment">// kSCNetworkReachabilityFlagsIsWWAN：判断是否通过蜂窝网覆盖的连接，比如EDGE，GPRS或者目前的3G.主要是区别通过WiFi的连接。</span></span><br><span class="line">    <span class="built_in">SCNetworkReachabilityRef</span> defaultRouteReachability = <span class="built_in">SCNetworkReachabilityCreateWithAddress</span>(<span class="literal">NULL</span>,</span><br><span class="line">        (<span class="keyword">struct</span> sockaddr*)&amp;zeroAddress);</span><br><span class="line">    <span class="built_in">SCNetworkReachabilityFlags</span> flags;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">BOOL</span> didRetrieveFlags = <span class="built_in">SCNetworkReachabilityGetFlags</span>(defaultRouteReachability, &amp;flags);</span><br><span class="line">    <span class="built_in">CFRelease</span>(defaultRouteReachability);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!didRetrieveFlags) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">BOOL</span> isReachable = flags &amp; kSCNetworkFlagsReachable;</span><br><span class="line">    <span class="built_in">BOOL</span> needsConnection = flags &amp; kSCNetworkFlagsConnectionRequired;</span><br><span class="line">    <span class="keyword">return</span> (isReachable &amp;&amp; !needsConnection) ? <span class="literal">YES</span> : <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

<h5 id="SimplePing"><a href="#SimplePing" class="headerlink" title="SimplePing"></a>SimplePing</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;常用的是 <a target="_blank" rel="noopener" href="https://github.com/lovesunstar/STPingTest/blob/master/STPingTest/Classes/PingTester/STSimplePing.h">STSimplePing.h</a> 这个版本，它扩展了一个每个 syn 之后响应所消耗的时间。通过它我们也可以判断当前网络的状态。但是回顾测试的需求，它是消耗额外资源的方式，也不建议实时使用。它通过 ping 下域名的延迟及时长来分析网络状态。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.simplePing = [[STSimplePing alloc] initWithHostName:<span class="string">@&quot;www.baidu.com&quot;</span>];</span><br><span class="line"><span class="keyword">self</span>.simplePing.delegate = <span class="keyword">self</span>;</span><br><span class="line">[<span class="keyword">self</span>.simplePing start];</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - STSimplePingDelegate</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)st_simplePing:(STSimplePing *)pinger didReceivePingResponsePacket:(<span class="built_in">NSData</span> *)packet timeToLive:(<span class="built_in">NSInteger</span>)timeToLive sequenceNumber:(uint16_t)sequenceNumber timeElapsed:(<span class="built_in">NSTimeInterval</span>)timeElapsed &#123;</span><br><span class="line">    [<span class="keyword">self</span>.simplePing stop];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%s&quot;</span>, __FUNCTION__);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;simplePing==%f&quot;</span>, timeElapsed);<span class="comment">//0.078942</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8471b68203e8">iOS开发中WiFi相关功能总结</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9f67b7716b9d">iOS 如何进行网络测速</a></li>
</ul>
<h5 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上述参考中还记录了获取其他数据的功能及不仅仅使用 SimplePing，还使用网卡来进行计算。网卡的这部分只做记录，因为在计算网速上，它无法测出满载，即当前设备网络的真正网速。它的用途更在于记录消耗的流量。 </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">long</span> <span class="keyword">long</span>)getDeviceCurrentBytesCount &#123;</span><br><span class="line">    <span class="keyword">struct</span> ifaddrs* addrs;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> ifaddrs* cursor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> currentBytesValue = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (getifaddrs(&amp;addrs) == <span class="number">0</span>) &#123;</span><br><span class="line">        cursor = addrs;</span><br><span class="line">        <span class="keyword">while</span> (cursor != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">struct</span> if_data* ifa_data = (<span class="keyword">struct</span> if_data*)cursor-&gt;ifa_data;</span><br><span class="line">            <span class="keyword">if</span> (ifa_data) &#123;</span><br><span class="line">                <span class="comment">// total number of octets received</span></span><br><span class="line">                <span class="keyword">int</span> receivedData = ifa_data-&gt;ifi_ibytes;</span><br><span class="line">                </span><br><span class="line">                currentBytesValue += receivedData;</span><br><span class="line">            &#125;</span><br><span class="line">            cursor = cursor-&gt;ifa_next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    freeifaddrs(addrs);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;BytesCount:%lld&quot;</span>,currentBytesValue);</span><br><span class="line">    <span class="keyword">return</span> currentBytesValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;它在 <a target="_blank" rel="noopener" href="http://gt.qq.com/">GT</a> 中使用过。GT 是腾讯开源的项目，主要是针对 APP 实时的性能测试记录，包含 CPU、电池等消耗。而其中也包含了网络测速，它使用的就是本次要说明的 tcpdump ，文档其实也就简单描述</p>
<blockquote>
<p>tcpdump 抓 包 手 机 需 要 越 狱 ， 且 暂 时 只 支 持 iOS6 。 抓 包 保 存 目 录 ：<br>Documents/GT/Plugin/pcap/</p>
</blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;并没有将 tcpdump 的代码开源处理，因此无法使用。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcpdump《<a target="_blank" rel="noopener" href="https://www.cnblogs.com/f-ck-need-u/p/7064286.html">抓包工具tcpdump用法说明</a>》，它其实是 PC 系统常用的抓包命令《<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b062c1dc2f0e">通过tcpdump对iOS进行流量分析（无需越狱）
</a>》里面介绍了结合 PC 工具进行抓包，而越狱的使用是通过在 cydia 里安装 openssh，tcpdump 两个工具之后使用手机终端操作，而 App 开发调用的方法暂无资料《<a target="_blank" rel="noopener" href="https://blog.csdn.net/skylin19840101/article/details/38270053">利用tcpdump抓取ios的tcp数据包</a>》。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://chenqihui.github.io/2018/09/05/iOS-%E7%BD%91%E9%80%9F%E7%9B%91%E6%8E%A7-%E5%AD%A6%E4%B9%A0%E7%AF%87/" data-id="ckddxq2ps000rgcug5hh950w5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E9%80%9F/" rel="tag">网速</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/09/16/iOS-%E5%8A%A8%E5%9B%BE%E6%92%AD%E6%94%BE-%E5%88%B6%E4%BD%9C%E5%90%88%E9%9B%86/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          iOS 动图播放 &amp; 制作合集
        
      </div>
    </a>
  
  
    <a href="/2018/08/23/iOS-%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">iOS 核心动画高级技巧</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Xcode/">Xcode</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Xcode/%E5%9F%BA%E7%A1%80/">基础</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/%E5%9F%BA%E7%A1%80/">基础</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8A%A8%E5%9B%BE/">动图</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8A%A8%E5%9B%BE/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/">软件工程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CocoaPods/" rel="tag">CocoaPods</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FLV/" rel="tag">FLV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Framework/" rel="tag">Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GCD/" rel="tag">GCD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gif/" rel="tag">Gif</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LivePhoto/" rel="tag">LivePhoto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/M3U8/" rel="tag">M3U8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MP4/" rel="tag">MP4</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/" rel="tag">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Objective-C/" rel="tag">Objective-C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PDF/" rel="tag">PDF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/" rel="tag">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/" rel="tag">String</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Svga/" rel="tag">Svga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-UDP-IP/" rel="tag">TCP / UDP / IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TS/" rel="tag">TS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIButton/" rel="tag">UIButton</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIImage/" rel="tag">UIImage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITextField/" rel="tag">UITextField</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITextView/" rel="tag">UITextView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/" rel="tag">UML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebP/" rel="tag">WebP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/" rel="tag">WebSocket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/" rel="tag">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/configure/" rel="tag">configure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layer/" rel="tag">layer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mask/" rel="tag">mask</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%80%BC%E5%8C%96/" rel="tag">二值化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E5%BA%93/" rel="tag">动态库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB/" rel="tag">动画</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" rel="tag">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E5%90%88%E7%89%B9%E6%95%88/" rel="tag">组合特效</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E9%80%9F/" rel="tag">网速</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CocoaPods/" style="font-size: 10px;">CocoaPods</a> <a href="/tags/FLV/" style="font-size: 10px;">FLV</a> <a href="/tags/Framework/" style="font-size: 10px;">Framework</a> <a href="/tags/GCD/" style="font-size: 12px;">GCD</a> <a href="/tags/Gif/" style="font-size: 10px;">Gif</a> <a href="/tags/Git/" style="font-size: 12px;">Git</a> <a href="/tags/Github/" style="font-size: 12px;">Github</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/LivePhoto/" style="font-size: 10px;">LivePhoto</a> <a href="/tags/M3U8/" style="font-size: 10px;">M3U8</a> <a href="/tags/MP4/" style="font-size: 10px;">MP4</a> <a href="/tags/MacOS/" style="font-size: 16px;">MacOS</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Objective-C/" style="font-size: 10px;">Objective-C</a> <a href="/tags/PDF/" style="font-size: 10px;">PDF</a> <a href="/tags/Socket/" style="font-size: 10px;">Socket</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/Svga/" style="font-size: 10px;">Svga</a> <a href="/tags/Swift/" style="font-size: 20px;">Swift</a> <a href="/tags/TCP-UDP-IP/" style="font-size: 10px;">TCP / UDP / IP</a> <a href="/tags/TS/" style="font-size: 10px;">TS</a> <a href="/tags/UIButton/" style="font-size: 10px;">UIButton</a> <a href="/tags/UIImage/" style="font-size: 10px;">UIImage</a> <a href="/tags/UITextField/" style="font-size: 10px;">UITextField</a> <a href="/tags/UITextView/" style="font-size: 10px;">UITextView</a> <a href="/tags/UML/" style="font-size: 10px;">UML</a> <a href="/tags/WebP/" style="font-size: 10px;">WebP</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/animation/" style="font-size: 10px;">animation</a> <a href="/tags/configure/" style="font-size: 10px;">configure</a> <a href="/tags/layer/" style="font-size: 18px;">layer</a> <a href="/tags/mask/" style="font-size: 10px;">mask</a> <a href="/tags/%E4%BA%8C%E5%80%BC%E5%8C%96/" style="font-size: 10px;">二值化</a> <a href="/tags/%E5%8A%A8%E6%80%81%E5%BA%93/" style="font-size: 10px;">动态库</a> <a href="/tags/%E5%8A%A8%E7%94%BB/" style="font-size: 14px;">动画</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 12px;">数据结构</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 10px;">版本控制</a> <a href="/tags/%E7%BB%84%E5%90%88%E7%89%B9%E6%95%88/" style="font-size: 10px;">组合特效</a> <a href="/tags/%E7%BD%91%E9%80%9F/" style="font-size: 10px;">网速</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/08/18/iOS-%E5%8A%A8%E6%80%81%E5%BA%93-%E5%BA%94%E7%94%A8%E7%AF%87/">iOS 动态库 应用篇</a>
          </li>
        
          <li>
            <a href="/2019/07/30/Git-%E8%BE%85%E5%AF%BC/">Git 辅导</a>
          </li>
        
          <li>
            <a href="/2019/06/12/iOS-%E5%BC%B9%E5%B9%95%E7%B3%BB%E7%BB%9F%E4%B9%8B%E6%99%BA%E8%83%BD%E5%BC%B9%E5%B9%95-%E5%AD%A6%E4%B9%A0%E7%AF%87/">iOS 弹幕系统之智能弹幕 学习篇</a>
          </li>
        
          <li>
            <a href="/2019/03/04/iOS-Socket-%E5%AD%A6%E4%B9%A0%E7%AF%87/">iOS Socket 学习篇</a>
          </li>
        
          <li>
            <a href="/2019/01/16/iOS-%E7%BB%84%E5%90%88%E7%A4%BC%E7%89%A9%E7%89%B9%E6%95%88/">iOS 组合礼物特效</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 AnakinChen<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>